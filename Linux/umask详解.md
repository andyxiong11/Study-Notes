> 来源：http://c.biancheng.net/view/764.html

----

Windows 系统中，新建的文件和目录时通过继承上级目录的权限获得的初始权限，而 Linux 不同，它是通过使用 umask 默认权限来给所有新建的文件和目录赋予初始权限的。

查看umask权限：
```shell
umask

0022
#root用户默认是0022，普通用户默认是 0002
```

umask 默认权限由 4 个八进制数组成，但第 1 个数代表的是文件所具有的特殊权限（SetUID、SetGID、Sticky BIT），后 3 位数字 "022" 才是umask 权限值，将其转变为字母形式为 ----w--w-。

文件（或目录）的初始权限 = 文件（或目录）的最大默认权限 - umask权限

- 对文件来讲，其可拥有的最大默认权限是 666，即 rw-rw-rw-，使用文件的任何用户都没有执行（x）权限。
- 对目录来讲，其可拥有的最大默认权限是 777，即 rwxrwxrwx。

以 umask 值为 022 为例，分别计算新建文件和目录的初始权限：
- 文件的最大默认权限是 666，换算成字母就是 "-rw-rw-rw-"，umask 的值是 022，换算成字母为 "-----w--w-"。把两个字母权限相减，得到 (-rw-rw-rw-) - (-----w--w-) = (-rw-r--r--)，这就是新建文件的初始权限。
- 目录的默认权限最大可以是 777，换算成字母就是 "drwxrwxrwx"，umask 的值是 022，也就是 "-----w--w-"。把两个字母权限相减，得到的就是新建目录的默认权限，即 (drwxrwxrwx) - (-----w--w-) = (drwxr-xr-x)。

## umask默认权限修改

临时修改
> umask [权限]

永久修改
> vim /etc/profile

```shell
if [ $UID -gt 199]&&[ "'id -gn'" = "'id -un'" ]; then
    umask 002
    #如果UID大于199（普通用户），则使用此umask值
else
    umask 022
    #如果UID小于199（超级用户），则使用此umask值
fi
```